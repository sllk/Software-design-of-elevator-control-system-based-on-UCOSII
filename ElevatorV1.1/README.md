# uC/OS II课程大作业 电梯控制系统

### log

* V1.0 LCD调通，正在驱动矩阵键盘
  	遇到问题：uC/OS系统下按键扫描应该放在什么地方
* 1.1 更改方案：使用F103ZET6，移植太难了，打算制作一个软件上位机，和单片机串口通信

### 任务分配

* 任务0：
  * 从上位机接收指令
  * 从指令中提取数据

* 任务1：
  * 控制电梯运动状态
  * 将当前楼层及运动状态发送至上位机

* 任务2
  * 将上位机发送的请求进行优先级排序，发送到任务1

### 串口通信协议

* 指令1：楼层请求电梯

  | 帧头 | 所在楼层 | 上/下行 |   帧尾    |
  | ---- | -------- | ------- | :-------: |
  | 0x01 | 0x08     | 0x01    | 0x0D+0x0A |

  示例：01 08 01 0D 0A

* 指令2：电梯内用户请求楼层

  | 帧头 | 目的楼层 | 帧尾      |
  | :--: | -------- | --------- |
  | 0x02 | 0x08     | 0x0D+0x0A |

  示例：02 08 0D 0A

### 系统返回值

* 某楼层有乘客要乘坐电梯时（指令1），系统返回：“**x 楼有人要上楼/下楼**”
* 乘客到达电梯内，选择需要前往的楼层（指令2），系统返回：“**目标楼层 x**”
* 电梯到达需要停留的楼层时返回：“**电梯已到达 x 层**”
* 电梯经过不需要停留的楼层时返回：“**电梯当前运行至第x层，方向为向上/向下**”

### 功能演示

使用以下电梯运行情况进行演示：

* 3层、4先后有乘客要上楼，3层的乘客要前往7层，4层的乘客要前往8层
* 在电梯开始上升时，5层有乘客要下楼前往2层
* 在电梯将3层、4层乘客送至相应楼层后开始下降时，3层有乘客要前往8层。

